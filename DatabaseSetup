

CREATE TYPE public.user_type AS ENUM ('user', 'admin');

CREATE TABLE IF NOT EXISTS "asset_type"
(
	id integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	name varchar(40) NOT NULL
)

CREATE TABLE IF NOT EXISTS "project" 
(
	id integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	name varchar(40) NOT NULL,
	shortName varchar(15) NOT NULL
)

CREATE TABLE IF NOT EXISTS "user"
(
    id integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	userName varchar(40) NOT NULL,
	name varchar(100) NOT NULL,
	password varchar(300) NOT NULL,
	enabled integer NOT NULL DEFAULT 1,
	userType USER_TYPE NOT NULL DEFAULT 'user',
	fk_project_id integer REFERENCES project(id)
)

CREATE TABLE IF NOT EXISTS "asset"
(
	id integer GENERATED BY DEFAULT AS IDENTITY,
	serial varchar(40) PRIMARY KEY NOT NULL,
	model varchar(40) NOT NULL,
	brand varchar(40) NOT NULL,
	size varchar(20),
	disposed integer DEFAULT 0,
	disposed_date date,
	disposed_reason varchar(200),
	fk_user_id integer REFERENCES public.user(id),
	fk_asset_type_id integer REFERENCES asset_type(id)
);
